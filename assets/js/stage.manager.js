var app=function(){var e=0,r=1,n=0,t=function(){$(document).on("click","#screen-eight-wrapper img#building",function(){$(".modal-wrapper .content-container").html("<iframe width='650' height='365' src='https://www.youtube.com/embed/hlRNO8xcrgU'>"),$(".modal-wrapper").fadeIn(700)}),$(document).on("click","#choppa",function(){$(".modal-wrapper .content-container").html("<iframe width='650' height='365' src='https://www.youtube.com/embed/QzL-iySR6nw'>"),$(".modal-wrapper").fadeIn(700)}),$(document).on("click",".shard-building",function(){$(".modal-wrapper .content-container").html("<iframe width='650' height='365' src='https://www.youtube.com/embed/4vuf15SzSfM'>"),$(".modal-wrapper").fadeIn(700)}),$(document).on("click",".gherkin-building",function(){$(".modal-wrapper .content-container").html("<iframe width='650' height='365' src='https://www.youtube.com/embed/QtbDj2zTc3c'>"),$(".modal-wrapper").fadeIn(700)}),$(document).on("click",".tube-building",function(){$(".modal-wrapper .content-container").html("<iframe width='650' height='365' src='https://www.youtube.com/embed/PH_Z8Ghuq6E'>"),$(".modal-wrapper").fadeIn(700)}),$(document).on("click",".modal-wrapper .close",function(){$(".modal-wrapper").fadeOut(700,function(){$(".modal-wrapper .content-container").html("")})}),$(document).on("click",".browser-detection .close",function(){$(".browser-detection").fadeOut(500)}),$(document).on("click",".eye-button",function(){var e=$(this),r=e.next();e.hasClass("active")?(r.stop().fadeOut("fast",function(){$(".numbers-box.active").removeClass("active"),e.removeClass("active")}),"height"==r.attr("data-type")?$(".bus-height").fadeOut("fast"):"cost"==r.attr("data-type")||"value"==r.attr("data-type")||r.attr("data-type")):($(".popup-text-wrapper:visible").stop().fadeOut("fast",function(){$(".numbers-box.active").removeClass("active"),$(".eye-button.active").removeClass("active"),e.addClass("active"),e.parents(".numbers-box").addClass("active")}),$(".bus-height:visible").fadeOut("fast"),"height"==r.attr("data-type")?$(e).parents("section.screen-wrapper").find(".bus-height").fadeIn("fast"):"cost"==r.attr("data-type")||"value"==r.attr("data-type")||r.attr("data-type"),e.parents(".numbers-box").addClass("active"),r.fadeIn("fast",function(){e.addClass("active")}))})},a=function(){$("body").on("mousewheel DOMMouseScroll",function(e,r){e.preventDefault(),$(window).scrollLeft($(window).scrollLeft()-30*r)}),c(),i();var n=0;document.addEventListener("touchstart",function(e){e&&e.touches&&e.touches.length>0&&e.touches[0]&&(n=e.touches[0].clientX)}),document.addEventListener("touchmove",function(r){r&&r.touches&&r.touches.length>0&&r.touches[0]&&(e+=n-r.touches[0].clientX,n=r.touches[0].clientX),o()}),$(window).on("scroll",function(n){$("footer").css({left:$(this).scrollLeft()+0}),p();var t=$(document).scrollLeft();e!=t?(e=t,i()):c(),e<=1190?r=1:e>1190&&e<=2975?r=2:e>2975&&e<=4050?r=3:e>4050&&e<=5510?r=4:e>5510&&e<=7140?r=5:e>7140&&e<=8430?r=6:e>8430&&e<=10060?r=7:e>10060&&e<=11424?r=8:e>11424&&e<=12829?r=9:e>12829&&e<=14165?r=10:e>14165&&e<=15329?r=11:e>15329&&e<=17041?r=12:e>17041&&e<=18717?r=13:e>18717&&e<=20292?r=14:e>20292&&(r=15)}),e=$(document).scrollLeft(),o()},i=function(){o()},o=function(){var r=$(".train-line"),n=r.find(".train"),t=r.find(".numbers-box.tube");0==e?(n.addClass("animate-left").css("left","-212px"),t.hide()):(parseInt(n.css("left"))>539&&n.removeClass("animate-left"),n.css("left",e+$(window).width()/2.5+"px"),t.stop(!0,!0),e>.98*($("body").width()-$(window).width())?t.fadeIn(500):t.fadeOut(500))},s=function(){Modernizr.addTest("keyframe",function(){return Modernizr.testAllProps("animationName")}),$("html").hasClass("keyframe")||$(".browser-detection").fadeIn(500)},c=function(){$("footer").css({left:$(this).scrollLeft()+0})},p=function(){setTimeout(function(){$(".popup-text-wrapper").fadeOut("fast",function(){}),$(".eye-button").removeClass("active"),$(".bus-height").fadeOut("fast")},100)};return{init:function(){a(),t(),s()},hidePreload:function(){if($(window).height(),navigator.userAgent.match(/msie/i)||navigator.userAgent.match(/trident/i)){var e=0;n=setInterval(function(){e+=3,$(".load-bar").rotate(e)},50)}$("section#pre-loading-wrapper").fadeOut(1e3,function(){clearInterval(n)}),$("section#main-section-wrapper").fadeTo(500,1,function(){app.init()})},initializeParallaxAnimations:function(){$delay=.15,$timing=2,$ease="Back.easeOut",$ease2="Back.easeIn";var e=new ScrollMagic({vertical:!1}),r=TweenMax.to("#screen-one-wrapper #anim-elem-2",.5,{marginLeft:"920px"}),n=(new ScrollScene({triggerElement:"#screen-one-wrapper #trigger2",duration:1e3,offset:700}).setTween(r).addTo(e),TweenMax.to("#screen-two-wrapper #anim-elem-1",.5,{marginTop:"0px"})),t=(new ScrollScene({triggerElement:"#screen-two-wrapper #trigger1",duration:300,offset:-300}).setTween(n).addTo(e),new ScrollScene({triggerElement:"#screen-two-wrapper #trigger2",duration:10}).addTo(e));t.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-two-wrapper .numbers-box","start")}),t.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-two-wrapper .numbers-box","end")});var a=TweenMax.to("#screen-two-wrapper #car",1,{right:"710px",ease:Back.easeOut}),i=new ScrollScene({triggerElement:"#screen-two-wrapper #trigger5",duration:1200,offset:1500}).setTween(a).addTo(e),o=TweenMax.to("#screen-two-wrapper #police2",1,{right:"710px",ease:Back.easeOut});new ScrollScene({triggerElement:"#screen-two-wrapper #trigger5",duration:1200,offset:1600}).setTween(o).addTo(e);(i=new ScrollScene({triggerElement:"#screen-two-wrapper #trigger5",duration:10}).addTo(e)).on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-two-wrapper .animated-tree","start")}),i.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-two-wrapper .animated-tree","end")});var s=TweenMax.to("#screen-three-wrapper #anim-elem-1",.5,{marginTop:"0px"}),c=(new ScrollScene({triggerElement:"#screen-three-wrapper #trigger1",duration:300,offset:-300}).setTween(s).addTo(e),new ScrollScene({triggerElement:"#screen-three-wrapper #trigger2",duration:10}).addTo(e));c.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-three-wrapper .numbers-box","start")}),c.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-three-wrapper .numbers-box","end")});var p=new ScrollScene({triggerElement:"#screen-three-wrapper #trigger4",duration:10}).addTo(e);p.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-three-wrapper .animated-tree","start")}),p.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-three-wrapper .animated-tree","end")});var l=TweenMax.to("#screen-four-wrapper #anim-elem-1",.5,{marginTop:"0px"}),d=(new ScrollScene({triggerElement:"#screen-four-wrapper #trigger1",duration:300,offset:-300}).setTween(l).addTo(e),new ScrollScene({triggerElement:"#screen-four-wrapper #trigger2",duration:10}).addTo(e));d.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-four-wrapper .numbers-box","start")}),d.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-four-wrapper .numbers-box","end")});var m=TweenMax.fromTo("#screen-four-wrapper #man",1,{left:"790px"},{left:"1290px"}),w=(new ScrollScene({triggerElement:"#screen-four-wrapper #trigger4",duration:1200,offset:200}).setTween(m).addTo(e),TweenMax.fromTo("#screen-four-wrapper #man2",1,{right:"550px"},{right:"790px"})),u=(new ScrollScene({triggerElement:"#screen-four-wrapper #trigger4",duration:1200,offset:200}).setTween(w).addTo(e),TweenMax.fromTo("#screen-four-wrapper #man3",1,{right:"440px"},{right:"680px"})),g=(new ScrollScene({triggerElement:"#screen-four-wrapper #trigger4",duration:1200,offset:200}).setTween(u).addTo(e),TweenMax.fromTo("#screen-four-wrapper #woman",1,{left:"730px"},{left:"1200px"})),f=(new ScrollScene({triggerElement:"#screen-four-wrapper #trigger4",duration:1200,offset:500}).setTween(g).addTo(e),TweenMax.to("#screen-five-wrapper #anim-elem-1",.5,{marginTop:"0px"})),T=(new ScrollScene({triggerElement:"#screen-five-wrapper #trigger1",duration:300,offset:-300}).setTween(f).addTo(e),new ScrollScene({triggerElement:"#screen-five-wrapper #trigger2",duration:10}).addTo(e));T.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-five-wrapper .numbers-box","start")}),T.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-five-wrapper .numbers-box","end")});var b=new ScrollScene({triggerElement:"#screen-five-wrapper #trigger5",duration:10}).addTo(e);b.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-five-wrapper .animated-tree","start")}),b.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-five-wrapper .animated-tree","end")});var S=TweenMax.to("#screen-six-wrapper #anim-elem-1",.5,{marginTop:"0px"}),E=(new ScrollScene({triggerElement:"#screen-six-wrapper #trigger1",duration:300,offset:-300}).setTween(S).addTo(e),new ScrollScene({triggerElement:"#screen-six-wrapper #trigger2",duration:10}).addTo(e));E.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-six-wrapper .numbers-box","start")}),E.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-six-wrapper .numbers-box","end")});var x=new ScrollScene({triggerElement:"#screen-six-wrapper #trigger5",duration:10}).addTo(e);x.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-six-wrapper .animated-tree","start")}),x.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-six-wrapper .animated-tree","end")});var h=TweenMax.fromTo("#screen-six-wrapper #bus-six",1,{left:"0px"},{left:"1130px"}),v=(new ScrollScene({triggerElement:"#screen-six-wrapper #trigger2",duration:1100,offset:200}).setTween(h).addTo(e),TweenMax.to("#screen-seven-wrapper #anim-elem-1",.5,{marginTop:"0px"})),R=(new ScrollScene({triggerElement:"#screen-seven-wrapper #trigger1",duration:300,offset:-300}).setTween(v).addTo(e),new ScrollScene({triggerElement:"#screen-seven-wrapper #trigger2",duration:10}).addTo(e));R.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-seven-wrapper .numbers-box","start")}),R.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-seven-wrapper .numbers-box","end")});var $=TweenMax.to("#screen-seven-wrapper #bridge-left",.5,{transform:"rotatez(-60deg)",bottom:"104px",marginLeft:"-53px"}),D=(new ScrollScene({triggerElement:"#screen-seven-wrapper #trigger7",duration:1e3,offset:700}).setTween($).addTo(e),TweenMax.to("#screen-seven-wrapper #bridge-right",.5,{transform:"rotatez(60deg)",bottom:"104px",marginLeft:"53px"})),O=(new ScrollScene({triggerElement:"#screen-seven-wrapper #trigger8",duration:1e3,offset:700}).setTween(D).addTo(e),TweenMax.to("#screen-eight-wrapper #anim-elem-1",.5,{marginTop:"0px"})),y=(new ScrollScene({triggerElement:"#screen-eight-wrapper #trigger1",duration:300,offset:-300}).setTween(O).addTo(e),new ScrollScene({triggerElement:"#screen-eight-wrapper #trigger2",duration:10}).addTo(e));y.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-eight-wrapper .numbers-box","start")}),y.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-eight-wrapper .numbers-box","end")});var M=new ScrollScene({triggerElement:"#screen-eight-wrapper #trigger5",duration:10}).addTo(e);M.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-eight-wrapper .animated-tree","start")}),M.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-eight-wrapper .animated-tree","end")});var A=TweenMax.to("#screen-nine-wrapper #anim-elem-1",.5,{marginTop:"0px"}),N=(new ScrollScene({triggerElement:"#screen-nine-wrapper #trigger1",duration:300,offset:-300}).setTween(A).addTo(e),new ScrollScene({triggerElement:"#screen-nine-wrapper #trigger2",duration:10}).addTo(e));N.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-nine-wrapper .numbers-box","start")}),N.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-nine-wrapper .numbers-box","end")});var F=new ScrollScene({triggerElement:"#screen-nine-wrapper #trigger5",duration:10}).addTo(e);F.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-nine-wrapper .animated-tree","start")}),F.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-nine-wrapper .animated-tree","end")});var V=TweenMax.to("#screen-ten-wrapper #anim-elem-1",.5,{marginTop:"0px"}),W=(new ScrollScene({triggerElement:"#screen-ten-wrapper #trigger1",duration:300,offset:-300}).setTween(V).addTo(e),new ScrollScene({triggerElement:"#screen-ten-wrapper #trigger2",duration:10}).addTo(e));W.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-ten-wrapper .numbers-box","start")}),W.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-ten-wrapper .numbers-box","end")});var k=new ScrollScene({triggerElement:"#screen-ten-wrapper #trigger5",duration:10}).addTo(e);k.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-ten-wrapper .animated-tree","start")}),k.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-ten-wrapper .animated-tree","end")});var C=TweenMax.to("#screen-eleven-wrapper #anim-elem-1",.5,{marginTop:"0px"}),I=(new ScrollScene({triggerElement:"#screen-eleven-wrapper #trigger1",duration:300,offset:-300}).setTween(C).addTo(e),new ScrollScene({triggerElement:"#screen-eleven-wrapper #trigger2",duration:10}).addTo(e));I.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-eleven-wrapper .numbers-box","start")}),I.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-eleven-wrapper .numbers-box","end")});var L=new ScrollScene({triggerElement:"#screen-eleven-wrapper #trigger4",duration:10}).addTo(e);L.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-eleven-wrapper .animated-tree","start")}),L.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-eleven-wrapper .animated-tree","end")});var z=TweenMax.to("#screen-twelve-wrapper #anim-elem-1",.5,{marginTop:"0px"}),B=(new ScrollScene({triggerElement:"#screen-twelve-wrapper #trigger1",duration:300,offset:-300}).setTween(z).addTo(e),new ScrollScene({triggerElement:"#screen-twelve-wrapper #trigger2",duration:10}).addTo(e));B.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-twelve-wrapper .numbers-box","start")}),B.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-twelve-wrapper .numbers-box","end")});var X=TweenMax.fromTo("#screen-twelve-wrapper #bus-twelve",1,{right:"0px"},{right:"1280px"}),P=(new ScrollScene({triggerElement:"#screen-twelve-wrapper #trigger2",duration:700,offset:200}).setTween(X).addTo(e),TweenMax.to("#screen-thirteen-wrapper #anim-elem-1",.5,{marginTop:"0px"})),Q=(new ScrollScene({triggerElement:"#screen-thirteen-wrapper #trigger1",duration:300,offset:-300}).setTween(P).addTo(e),new ScrollScene({triggerElement:"#screen-thirteen-wrapper #trigger2",duration:10}).addTo(e));Q.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-thirteen-wrapper .numbers-box","start")}),Q.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-thirteen-wrapper .numbers-box","end")});var j=new ScrollScene({triggerElement:"#screen-thirteen-wrapper #trigger4",duration:10}).addTo(e);j.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-thirteen-wrapper .animated-tree","start")}),j.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-thirteen-wrapper .animated-tree","end")});var q=TweenMax.to("#screen-fourteen-wrapper #anim-elem-1",.5,{marginTop:"0px"}),G=(new ScrollScene({triggerElement:"#screen-fourteen-wrapper #trigger1",duration:300,offset:-300}).setTween(q).addTo(e),TweenMax.to("#screen-fourteen-wrapper #build-spines",1,{height:"238px",ease:Back.easeOut})),H=(new ScrollScene({triggerElement:"#screen-fourteen-wrapper #trigger1",duration:1e3,offset:700}).setTween(G).addTo(e),new ScrollScene({triggerElement:"#screen-fourteen-wrapper #trigger2",duration:10}).addTo(e));H.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-fourteen-wrapper .numbers-box","start")}),H.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-fourteen-wrapper .numbers-box","end")});var U=new ScrollScene({triggerElement:"#screen-fourteen-wrapper #trigger5",duration:10}).addTo(e);U.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-fourteen-wrapper .animated-tree","start")}),U.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-fourteen-wrapper .animated-tree","end")});var Z=TweenMax.to("#screen-fiveten-wrapper #anim-elem-1",.5,{marginTop:"0px"}),_=(new ScrollScene({triggerElement:"#screen-fiveten-wrapper #trigger1",duration:300,offset:-300}).setTween(Z).addTo(e),new ScrollScene({triggerElement:"#screen-fiveten-wrapper #trigger2",duration:10}).addTo(e));_.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-fiveten-wrapper .numbers-box","start")}),_.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-fiveten-wrapper .numbers-box","end")});var J=new ScrollScene({triggerElement:"#screen-fiveten-wrapper #trigger4",duration:10}).addTo(e);J.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-fiveten-wrapper .animated-tree","start")}),J.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-fiveten-wrapper .animated-tree","end")});var K=TweenMax.to("#screen-sixteen-wrapper #anim-elem-1",.5,{marginTop:"0px"}),Y=(new ScrollScene({triggerElement:"#screen-sixteen-wrapper #trigger1",duration:300,offset:-300}).setTween(K).addTo(e),new ScrollScene({triggerElement:"#screen-sixteen-wrapper #trigger2",duration:10}).addTo(e));Y.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateNumbers("#screen-sixteen-wrapper .numbers-box","start")}),Y.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateNumbers("#screen-sixteen-wrapper .numbers-box","end")});var ee=new ScrollScene({triggerElement:"#screen-sixteen-wrapper #trigger4",duration:10,offset:400}).addTo(e);ee.on("start",function(e){"FORWARD"==e.scrollDirection&&app.animateTrees("#screen-sixteen-wrapper .animated-tree","start")}),ee.on("end",function(e){"REVERSE"==e.scrollDirection&&app.animateTrees("#screen-sixteen-wrapper .animated-tree","end")})},animateTrees:function(e,r){switch($delay=.15,$timing=2,$ease="Back.easeOut",$ease2="Back.easeIn",TweenMax.killTweensOf(e),r){case"start":setTimeout(function(){$(e).each(function(e){TweenMax.to($(this),$timing,{delay:$delay*e,rotationX:0,opacity:1,ease:$ease,startAt:{visibility:"visible"}})})},100);break;case"end":setTimeout(function(){$(e).each(function(e){TweenMax.fromTo($(this),$timing,{rotationX:0,startAt:{visibility:"visible"}},{delay:$delay*e,rotationX:-89,ease:$ease2,opacity:0,onCompleteParams:[$(this)],onComplete:function(e){e.css({visibility:"hidden",opacity:1})}})})},400)}},animateNumbers:function(e,r){switch($delay=.15,$timing=2,$ease="Back.easeOut",$ease2="Back.easeIn",TweenMax.killTweensOf(e),r){case"start":setTimeout(function(){$(e).each(function(e){TweenMax.to($(this),$timing+1,{rotationX:0,opacity:1,ease:$ease,startAt:{visibility:"visible"}})})},100);break;case"end":setTimeout(function(){$(e).each(function(e){TweenMax.fromTo($(this),$timing-2,{rotationX:0,startAt:{visibility:"visible"}},{delay:$delay*e,rotationX:0,ease:$ease2,opacity:0,onCompleteParams:[$(this)],onComplete:function(e){e.css({visibility:"hidden",opacity:0})}})})},0)}}}}();$(window).load(app.hidePreload),$(document).ready(app.initializeParallaxAnimations);